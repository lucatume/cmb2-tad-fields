(function(e,g,c){var b=g.tad||{};var h=b.bus||_.extend({},Backbone.Events);var a=Backbone.View.extend({initNestableList:function(){var j=this.$el.data("group")||0;var k=this.$el.data("max-depth")||0;this.$el.nestable({group:j,maxdepth:k})},initialize:function(){this.initNestableList()}});var d=a.extend({getLIstValue:function(){var j=this.$el.nestable("serialize");return j},dispatchChange:function(){var j=this.getLIstValue();h.trigger("tad-cmb2:nestable-list-change",j,this.$el);this.model.set("value",j)},bindEvents:function(){this.$el.on("change",_.bind(this.dispatchChange,this))},initialize:function(){this.initNestableList();this.bindEvents();this.dispatchChange()}});var i=Backbone.View.extend({render:function(){var j=JSON.stringify(this.model.get("value"));this.$el.val(j)},initialize:function(){this.listenTo(this.model,"change",this.render)}});var f=Backbone.Model.extend({value:""});e(document).ready(function(){_.each(e(".dd"),function(l){var k=e(l);var m=k.siblings('input[type="hidden"]');var j=new f();new i({el:m,model:j});if(k.hasClass("updating-list")){new d({el:k,model:j})}else{new a({el:k})}})})})(jQuery,window);