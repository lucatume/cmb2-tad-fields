define(["./core","./var/pnum","./css/var/cssExpand","./css/var/isHidden","./css/defaultDisplay","./data/var/data_priv","./core/init","./effects/Tween","./queue","./css","./deferred","./traversing"],function(l,b,d,g,i,s){var f,k,c=/^(?:toggle|show|hide)$/,e=new RegExp("^(?:([+-])=|)("+b+")([a-z%]*)$","i"),m=/queueHooks$/,h=[j],a={"*":[function(t,z){var B=this.createTween(t,z),x=B.cur(),w=e.exec(z),A=w&&w[3]||(l.cssNumber[t]?"":"px"),u=(l.cssNumber[t]||A!=="px"&&+x)&&e.exec(l.css(B.elem,t)),v=1,y=20;if(u&&u[3]!==A){A=A||u[3];w=w||[];u=+x||1;do{v=v||".5";u=u/v;l.style(B.elem,t,u+A)}while(v!==(v=B.cur()/x)&&v!==1&&--y)}if(w){u=B.start=+u||+x||0;B.unit=A;B.end=w[1]?u+(w[1]+1)*w[2]:+w[2]}return B}]};function n(){setTimeout(function(){f=undefined});return(f=l.now())}function p(v,x){var w,u=0,t={height:v};x=x?1:0;for(;u<4;u+=2-x){w=d[u];t["margin"+w]=t["padding"+w]=v}if(x){t.opacity=t.width=v}return t}function o(x,z,w){var u,y=(a[z]||[]).concat(a["*"]),t=0,v=y.length;for(;t<v;t++){if((u=y[t].call(w,z,x))){return u}}}function j(w,B,t){var v,E,y,H,I,F,A,D,x=this,C={},u=w.style,z=w.nodeType&&g(w),G=s.get(w,"fxshow");if(!t.queue){I=l._queueHooks(w,"fx");if(I.unqueued==null){I.unqueued=0;F=I.empty.fire;I.empty.fire=function(){if(!I.unqueued){F()}}}I.unqueued++;x.always(function(){x.always(function(){I.unqueued--;if(!l.queue(w,"fx").length){I.empty.fire()}})})}if(w.nodeType===1&&("height" in B||"width" in B)){t.overflow=[u.overflow,u.overflowX,u.overflowY];A=l.css(w,"display");D=A==="none"?s.get(w,"olddisplay")||i(w.nodeName):A;if(D==="inline"&&l.css(w,"float")==="none"){u.display="inline-block"}}if(t.overflow){u.overflow="hidden";x.always(function(){u.overflow=t.overflow[0];u.overflowX=t.overflow[1];u.overflowY=t.overflow[2]})}for(v in B){E=B[v];if(c.exec(E)){delete B[v];y=y||E==="toggle";if(E===(z?"hide":"show")){if(E==="show"&&G&&G[v]!==undefined){z=true}else{continue}}C[v]=G&&G[v]||l.style(w,v)}else{A=undefined}}if(!l.isEmptyObject(C)){if(G){if("hidden" in G){z=G.hidden}}else{G=s.access(w,"fxshow",{})}if(y){G.hidden=!z}if(z){l(w).show()}else{x.done(function(){l(w).hide()})}x.done(function(){var J;s.remove(w,"fxshow");for(J in C){l.style(w,J,C[J])}});for(v in C){H=o(z?G[v]:0,v,x);if(!(v in G)){G[v]=H.start;if(z){H.end=H.start;H.start=v==="width"||v==="height"?1:0}}}}else{if((A==="none"?i(w.nodeName):A)==="inline"){u.display=A}}}function q(w,y){var v,u,z,x,t;for(v in w){u=l.camelCase(v);z=y[u];x=w[v];if(l.isArray(x)){z=x[1];x=w[v]=x[0]}if(v!==u){w[u]=x;delete w[v]}t=l.cssHooks[u];if(t&&"expand" in t){x=t.expand(x);delete w[u];for(v in x){if(!(v in w)){w[v]=x[v];y[v]=z}}}else{y[u]=z}}}function r(v,z,C){var D,t,y=0,u=h.length,B=l.Deferred().always(function(){delete x.elem}),x=function(){if(t){return false}var J=f||n(),G=Math.max(0,w.startTime+w.duration-J),E=G/w.duration||0,I=1-E,F=0,H=w.tweens.length;for(;F<H;F++){w.tweens[F].run(I)}B.notifyWith(v,[w,I,G]);if(I<1&&H){return G}else{B.resolveWith(v,[w]);return false}},w=B.promise({elem:v,props:l.extend({},z),opts:l.extend(true,{specialEasing:{}},C),originalProperties:z,originalOptions:C,startTime:f||n(),duration:C.duration,tweens:[],createTween:function(G,E){var F=l.Tween(v,w.opts,G,E,w.opts.specialEasing[G]||w.opts.easing);w.tweens.push(F);return F},stop:function(F){var E=0,G=F?w.tweens.length:0;if(t){return this}t=true;for(;E<G;E++){w.tweens[E].run(1)}if(F){B.resolveWith(v,[w,F])}else{B.rejectWith(v,[w,F])}return this}}),A=w.props;q(A,w.opts.specialEasing);for(;y<u;y++){D=h[y].call(w,v,A,w.opts);if(D){return D}}l.map(A,o,w);if(l.isFunction(w.opts.start)){w.opts.start.call(v,w)}l.fx.timer(l.extend(x,{elem:v,anim:w,queue:w.opts.queue}));return w.progress(w.opts.progress).done(w.opts.done,w.opts.complete).fail(w.opts.fail).always(w.opts.always)}l.Animation=l.extend(r,{tweener:function(u,x){if(l.isFunction(u)){x=u;u=["*"]}else{u=u.split(" ")}var w,t=0,v=u.length;for(;t<v;t++){w=u[t];a[w]=a[w]||[];a[w].unshift(x)}},prefilter:function(u,t){if(t){h.unshift(u)}else{h.push(u)}}});l.speed=function(v,w,u){var t=v&&typeof v==="object"?l.extend({},v):{complete:u||!u&&w||l.isFunction(v)&&v,duration:v,easing:u&&w||w&&!l.isFunction(w)&&w};t.duration=l.fx.off?0:typeof t.duration==="number"?t.duration:t.duration in l.fx.speeds?l.fx.speeds[t.duration]:l.fx.speeds._default;if(t.queue==null||t.queue===true){t.queue="fx"}t.old=t.complete;t.complete=function(){if(l.isFunction(t.old)){t.old.call(this)}if(t.queue){l.dequeue(this,t.queue)}};return t};l.fn.extend({fadeTo:function(t,w,v,u){return this.filter(g).css("opacity",0).show().end().animate({opacity:w},t,v,u)},animate:function(z,w,y,x){var v=l.isEmptyObject(z),t=l.speed(w,y,x),u=function(){var A=r(this,l.extend({},z),t);if(v||s.get(this,"finish")){A.stop(true)}};u.finish=u;return v||t.queue===false?this.each(u):this.queue(t.queue,u)},stop:function(v,u,t){var w=function(x){var y=x.stop;delete x.stop;y(t)};if(typeof v!=="string"){t=u;u=v;v=undefined}if(u&&v!==false){this.queue(v||"fx",[])}return this.each(function(){var A=true,x=v!=null&&v+"queueHooks",z=l.timers,y=s.get(this);if(x){if(y[x]&&y[x].stop){w(y[x])}}else{for(x in y){if(y[x]&&y[x].stop&&m.test(x)){w(y[x])}}}for(x=z.length;x--;){if(z[x].elem===this&&(v==null||z[x].queue===v)){z[x].anim.stop(t);A=false;z.splice(x,1)}}if(A||!t){l.dequeue(this,v)}})},finish:function(t){if(t!==false){t=t||"fx"}return this.each(function(){var w,z=s.get(this),v=z[t+"queue"],u=z[t+"queueHooks"],y=l.timers,x=v?v.length:0;z.finish=true;l.queue(this,t,[]);if(u&&u.stop){u.stop.call(this,true)}for(w=y.length;w--;){if(y[w].elem===this&&y[w].queue===t){y[w].anim.stop(true);y.splice(w,1)}}for(w=0;w<x;w++){if(v[w]&&v[w].finish){v[w].finish.call(this)}}delete z.finish})}});l.each(["toggle","show","hide"],function(u,t){var v=l.fn[t];l.fn[t]=function(w,y,x){return w==null||typeof w==="boolean"?v.apply(this,arguments):this.animate(p(t,true),w,y,x)}});l.each({slideDown:p("show"),slideUp:p("hide"),slideToggle:p("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,u){l.fn[t]=function(v,x,w){return this.animate(u,v,x,w)}});l.timers=[];l.fx.tick=function(){var v,t=0,u=l.timers;f=l.now();for(;t<u.length;t++){v=u[t];if(!v()&&u[t]===v){u.splice(t--,1)}}if(!u.length){l.fx.stop()}f=undefined};l.fx.timer=function(t){l.timers.push(t);if(t()){l.fx.start()}else{l.timers.pop()}};l.fx.interval=13;l.fx.start=function(){if(!k){k=setInterval(l.fx.tick,l.fx.interval)}};l.fx.stop=function(){clearInterval(k);k=null};l.fx.speeds={slow:600,fast:200,_default:400};return l});