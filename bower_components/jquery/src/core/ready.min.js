define(["../core","../core/init","../deferred"],function(b){var c;b.fn.ready=function(d){b.ready.promise().done(d);return this};b.extend({isReady:false,readyWait:1,holdReady:function(d){if(d){b.readyWait++}else{b.ready(true)}},ready:function(d){if(d===true?--b.readyWait:b.isReady){return}b.isReady=true;if(d!==true&&--b.readyWait>0){return}c.resolveWith(document,[b]);if(b.fn.triggerHandler){b(document).triggerHandler("ready");b(document).off("ready")}}});function a(){document.removeEventListener("DOMContentLoaded",a,false);window.removeEventListener("load",a,false);b.ready()}b.ready.promise=function(d){if(!c){c=b.Deferred();if(document.readyState==="complete"){setTimeout(b.ready)}else{document.addEventListener("DOMContentLoaded",a,false);window.addEventListener("load",a,false)}}return c.promise(d)};b.ready.promise()});