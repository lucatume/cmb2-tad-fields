define(["./core","./var/rnotwhite","./core/access","./data/var/data_priv","./data/var/data_user"],function(h,c,b,f,d){var e=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,a=/([A-Z])/g;function g(k,j,l){var i;if(l===undefined&&k.nodeType===1){i="data-"+j.replace(a,"-$1").toLowerCase();l=k.getAttribute(i);if(typeof l==="string"){try{l=l==="true"?true:l==="false"?false:l==="null"?null:+l+""===l?+l:e.test(l)?h.parseJSON(l):l}catch(m){}d.set(k,j,l)}else{l=undefined}}return l}h.extend({hasData:function(i){return d.hasData(i)||f.hasData(i)},data:function(j,i,k){return d.access(j,i,k)},removeData:function(j,i){d.remove(j,i)},_data:function(j,i,k){return f.access(j,i,k)},_removeData:function(j,i){f.remove(j,i)}});h.fn.extend({data:function(m,p){var l,k,o,n=this[0],j=n&&n.attributes;if(m===undefined){if(this.length){o=d.get(n);if(n.nodeType===1&&!f.get(n,"hasDataAttrs")){l=j.length;while(l--){if(j[l]){k=j[l].name;if(k.indexOf("data-")===0){k=h.camelCase(k.slice(5));g(n,k,o[k])}}}f.set(n,"hasDataAttrs",true)}}return o}if(typeof m==="object"){return this.each(function(){d.set(this,m)})}return b(this,function(r){var q,i=h.camelCase(m);if(n&&r===undefined){q=d.get(n,m);if(q!==undefined){return q}q=d.get(n,i);if(q!==undefined){return q}q=g(n,i,undefined);if(q!==undefined){return q}return}this.each(function(){var s=d.get(this,i);d.set(this,i,r);if(m.indexOf("-")!==-1&&s!==undefined){d.set(this,m,r)}})},null,p,arguments.length>1,null,true)},removeData:function(i){return this.each(function(){d.remove(this,i)})}});return h});