define(["../core","../var/rnotwhite","./accepts"],function(c,b){function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=c.expando+a.uid++}a.uid=1;a.accepts=c.acceptData;a.prototype={key:function(d){if(!a.accepts(d)){return 0}var g={},h=d[this.expando];if(!h){h=a.uid++;try{g[this.expando]={value:h};Object.defineProperties(d,g)}catch(f){g[this.expando]=h;c.extend(d,g)}}if(!this.cache[h]){this.cache[h]={}}return h},set:function(d,g,f){var i,h=this.key(d),e=this.cache[h];if(typeof g==="string"){e[g]=f}else{if(c.isEmptyObject(e)){c.extend(this.cache[h],g)}else{for(i in g){e[i]=g[i]}}}return e},get:function(d,f){var e=this.cache[this.key(d)];return f===undefined?e:e[f]},access:function(d,e,g){var f;if(e===undefined||((e&&typeof e==="string")&&g===undefined)){f=this.get(d,e);return f!==undefined?f:this.get(d,c.camelCase(e))}this.set(d,e,g);return g!==undefined?g:e},remove:function(d,j){var h,f,g,k=this.key(d),e=this.cache[k];if(j===undefined){this.cache[k]={}}else{if(c.isArray(j)){f=j.concat(j.map(c.camelCase))}else{g=c.camelCase(j);if(j in e){f=[j,g]}else{f=g;f=f in e?[f]:(f.match(b)||[])}}h=f.length;while(h--){delete e[f[h]]}}},hasData:function(d){return !c.isEmptyObject(this.cache[d[this.expando]]||{})},discard:function(d){if(d[this.expando]){delete this.cache[d[this.expando]]}}};return a});