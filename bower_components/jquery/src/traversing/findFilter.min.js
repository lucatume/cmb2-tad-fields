define(["../core","../var/indexOf","./var/rneedsContext","../selector"],function(c,a,e){var b=/^.[^:#\[\.,]*$/;function d(h,f,g){if(c.isFunction(f)){return c.grep(h,function(k,j){return !!f.call(k,j,k)!==g})}if(f.nodeType){return c.grep(h,function(i){return(i===f)!==g})}if(typeof f==="string"){if(b.test(f)){return c.filter(f,h,g)}f=c.filter(f,h)}return c.grep(h,function(i){return(a.call(f,i)>=0)!==g})}c.filter=function(i,f,h){var g=f[0];if(h){i=":not("+i+")"}return f.length===1&&g.nodeType===1?c.find.matchesSelector(g,i)?[g]:[]:c.find.matches(i,c.grep(f,function(j){return j.nodeType===1}))};c.fn.extend({find:function(g){var k,f=this.length,j=[],h=this;if(typeof g!=="string"){return this.pushStack(c(g).filter(function(){for(k=0;k<f;k++){if(c.contains(h[k],this)){return true}}}))}for(k=0;k<f;k++){c.find(g,h[k],j)}j=this.pushStack(f>1?c.unique(j):j);j.selector=this.selector?this.selector+" "+g:g;return j},filter:function(f){return this.pushStack(d(this,f||[],false))},not:function(f){return this.pushStack(d(this,f||[],true))},is:function(f){return !!d(this,typeof f==="string"&&e.test(f)?c(f):f||[],false).length}})});