define(["./core","./var/indexOf","./traversing/var/rneedsContext","./core/init","./traversing/findFilter","./selector"],function(e,d,f){var c=/^(?:parents|prev(?:Until|All))/,a={children:true,contents:true,next:true,prev:true};e.extend({dir:function(j,h,k){var g=[],i=k!==undefined;while((j=j[h])&&j.nodeType!==9){if(j.nodeType===1){if(i&&e(j).is(k)){break}g.push(j)}}return g},sibling:function(i,h){var g=[];for(;i;i=i.nextSibling){if(i.nodeType===1&&i!==h){g.push(i)}}return g}});e.fn.extend({has:function(i){var h=e(i,this),g=h.length;return this.filter(function(){var j=0;for(;j<g;j++){if(e.contains(this,h[j])){return true}}})},closest:function(m,k){var n,j=0,h=this.length,g=[],o=f.test(m)||typeof m!=="string"?e(m,k||this.context):0;for(;j<h;j++){for(n=this[j];n&&n!==k;n=n.parentNode){if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&e.find.matchesSelector(n,m))){g.push(n);break}}}return this.pushStack(g.length>1?e.unique(g):g)},index:function(g){if(!g){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1}if(typeof g==="string"){return d.call(e(g),this[0])}return d.call(this,g.jquery?g[0]:g)},add:function(g,h){return this.pushStack(e.unique(e.merge(this.get(),e(g,h))))},addBack:function(g){return this.add(g==null?this.prevObject:this.prevObject.filter(g))}});function b(h,g){while((h=h[g])&&h.nodeType!==1){}return h}e.each({parent:function(h){var g=h.parentNode;return g&&g.nodeType!==11?g:null},parents:function(g){return e.dir(g,"parentNode")},parentsUntil:function(h,g,j){return e.dir(h,"parentNode",j)},next:function(g){return b(g,"nextSibling")},prev:function(g){return b(g,"previousSibling")},nextAll:function(g){return e.dir(g,"nextSibling")},prevAll:function(g){return e.dir(g,"previousSibling")},nextUntil:function(h,g,j){return e.dir(h,"nextSibling",j)},prevUntil:function(h,g,j){return e.dir(h,"previousSibling",j)},siblings:function(g){return e.sibling((g.parentNode||{}).firstChild,g)},children:function(g){return e.sibling(g.firstChild)},contents:function(g){return g.contentDocument||e.merge([],g.childNodes)}},function(g,h){e.fn[g]=function(k,j){var i=e.map(this,h,k);if(g.slice(-5)!=="Until"){j=k}if(j&&typeof j==="string"){i=e.filter(j,i)}if(this.length>1){if(!a[g]){e.unique(i)}if(c.test(g)){i.reverse()}}return this.pushStack(i)}});return e});