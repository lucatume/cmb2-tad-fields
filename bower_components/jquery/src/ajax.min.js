define(["./core","./var/rnotwhite","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./deferred"],function(l,p,q,g){var j=/#.*$/,c=/([?&])_=[^&]*/,a=/^(.*?):[ \t]*([^\r\n]*)$/mg,d=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,f=/^(?:GET|HEAD)$/,i=/^\/\//,e=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,u={},s={},k="*/".concat("*"),t=window.location.href,h=e.exec(t.toLowerCase())||[];function m(v){return function(z,A){if(typeof z!=="string"){A=z;z="*"}var w,x=0,y=z.toLowerCase().match(p)||[];if(l.isFunction(A)){while((w=y[x++])){if(w[0]==="+"){w=w.slice(1)||"*";(v[w]=v[w]||[]).unshift(A)}else{(v[w]=v[w]||[]).push(A)}}}}}function o(v,x,B,y){var w={},z=(v===s);function A(C){var D;w[C]=true;l.each(v[C]||[],function(F,E){var G=E(x,B,y);if(typeof G==="string"&&!z&&!w[G]){x.dataTypes.unshift(G);A(G);return false}else{if(z){return !(D=G)}}});return D}return A(x.dataTypes[0])||!w["*"]&&A("*")}function n(x,y){var w,v,z=l.ajaxSettings.flatOptions||{};for(w in y){if(y[w]!==undefined){(z[w]?x:(v||(v={})))[w]=y[w]}}if(v){l.extend(true,x,v)}return x}function r(D,C,z){var y,A,x,v,w=D.contents,B=D.dataTypes;while(B[0]==="*"){B.shift();if(y===undefined){y=D.mimeType||C.getResponseHeader("Content-Type")}}if(y){for(A in w){if(w[A]&&w[A].test(y)){B.unshift(A);break}}}if(B[0] in z){x=B[0]}else{for(A in z){if(!B[0]||D.converters[A+" "+B[0]]){x=A;break}if(!v){v=A}}x=x||v}if(x){if(x!==B[0]){B.unshift(x)}return z[x]}}function b(G,y,D,w){var v,B,E,z,x,F={},C=G.dataTypes.slice();if(C[1]){for(E in G.converters){F[E.toLowerCase()]=G.converters[E]}}B=C.shift();while(B){if(G.responseFields[B]){D[G.responseFields[B]]=y}if(!x&&w&&G.dataFilter){y=G.dataFilter(y,G.dataType)}x=B;B=C.shift();if(B){if(B==="*"){B=x}else{if(x!=="*"&&x!==B){E=F[x+" "+B]||F["* "+B];if(!E){for(v in F){z=v.split(" ");if(z[1]===B){E=F[x+" "+z[0]]||F["* "+z[0]];if(E){if(E===true){E=F[v]}else{if(F[v]!==true){B=z[0];C.unshift(z[1])}}break}}}}if(E!==true){if(E&&G["throws"]){y=E(y)}else{try{y=E(y)}catch(A){return{state:"parsererror",error:E?A:"No conversion from "+x+" to "+B}}}}}}}}return{state:"success",data:y}}l.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:t,type:"GET",isLocal:d.test(h[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":k,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":l.parseJSON,"text xml":l.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(w,v){return v?n(n(w,l.ajaxSettings),v):n(l.ajaxSettings,w)},ajaxPrefilter:m(u),ajaxTransport:m(s),ajax:function(z,w){if(typeof z==="object"){w=z;z=undefined}w=w||{};var L,A,P,x,E,I,v,K,D=l.ajaxSetup({},w),R=D.context||D,G=D.context&&(R.nodeType||R.jquery)?l(R):l.event,Q=l.Deferred(),N=l.Callbacks("once memory"),B=D.statusCode||{},H={},O={},y=0,C="canceled",J={readyState:0,getResponseHeader:function(T){var S;if(y===2){if(!x){x={};while((S=a.exec(P))){x[S[1].toLowerCase()]=S[2]}}S=x[T.toLowerCase()]}return S==null?null:S},getAllResponseHeaders:function(){return y===2?P:null},setRequestHeader:function(T,U){var S=T.toLowerCase();if(!y){T=O[S]=O[S]||T;H[T]=U}return this},overrideMimeType:function(S){if(!y){D.mimeType=S}return this},statusCode:function(T){var S;if(T){if(y<2){for(S in T){B[S]=[B[S],T[S]]}}else{J.always(T[J.status])}}return this},abort:function(T){var S=T||C;if(L){L.abort(S)}F(0,S);return this}};Q.promise(J).complete=N.add;J.success=J.done;J.error=J.fail;D.url=((z||D.url||t)+"").replace(j,"").replace(i,h[1]+"//");D.type=w.method||w.type||D.method||D.type;D.dataTypes=l.trim(D.dataType||"*").toLowerCase().match(p)||[""];if(D.crossDomain==null){I=e.exec(D.url.toLowerCase());D.crossDomain=!!(I&&(I[1]!==h[1]||I[2]!==h[2]||(I[3]||(I[1]==="http:"?"80":"443"))!==(h[3]||(h[1]==="http:"?"80":"443"))))}if(D.data&&D.processData&&typeof D.data!=="string"){D.data=l.param(D.data,D.traditional)}o(u,D,w,J);if(y===2){return J}v=l.event&&D.global;if(v&&l.active++===0){l.event.trigger("ajaxStart")}D.type=D.type.toUpperCase();D.hasContent=!f.test(D.type);A=D.url;if(!D.hasContent){if(D.data){A=(D.url+=(g.test(A)?"&":"?")+D.data);delete D.data}if(D.cache===false){D.url=c.test(A)?A.replace(c,"$1_="+q++):A+(g.test(A)?"&":"?")+"_="+q++}}if(D.ifModified){if(l.lastModified[A]){J.setRequestHeader("If-Modified-Since",l.lastModified[A])}if(l.etag[A]){J.setRequestHeader("If-None-Match",l.etag[A])}}if(D.data&&D.hasContent&&D.contentType!==false||w.contentType){J.setRequestHeader("Content-Type",D.contentType)}J.setRequestHeader("Accept",D.dataTypes[0]&&D.accepts[D.dataTypes[0]]?D.accepts[D.dataTypes[0]]+(D.dataTypes[0]!=="*"?", "+k+"; q=0.01":""):D.accepts["*"]);for(K in D.headers){J.setRequestHeader(K,D.headers[K])}if(D.beforeSend&&(D.beforeSend.call(R,J,D)===false||y===2)){return J.abort()}C="abort";for(K in {success:1,error:1,complete:1}){J[K](D[K])}L=o(s,D,w,J);if(!L){F(-1,"No Transport")}else{J.readyState=1;if(v){G.trigger("ajaxSend",[J,D])}if(D.async&&D.timeout>0){E=setTimeout(function(){J.abort("timeout")},D.timeout)}try{y=1;L.send(H,F)}catch(M){if(y<2){F(-1,M)}else{throw M}}}function F(X,T,Y,V){var S,ab,Z,W,aa,U=T;if(y===2){return}y=2;if(E){clearTimeout(E)}L=undefined;P=V||"";J.readyState=X>0?4:0;S=X>=200&&X<300||X===304;if(Y){W=r(D,J,Y)}W=b(D,W,J,S);if(S){if(D.ifModified){aa=J.getResponseHeader("Last-Modified");if(aa){l.lastModified[A]=aa}aa=J.getResponseHeader("etag");if(aa){l.etag[A]=aa}}if(X===204||D.type==="HEAD"){U="nocontent"}else{if(X===304){U="notmodified"}else{U=W.state;ab=W.data;Z=W.error;S=!Z}}}else{Z=U;if(X||!U){U="error";if(X<0){X=0}}}J.status=X;J.statusText=(T||U)+"";if(S){Q.resolveWith(R,[ab,U,J])}else{Q.rejectWith(R,[J,U,Z])}J.statusCode(B);B=undefined;if(v){G.trigger(S?"ajaxSuccess":"ajaxError",[J,D,S?ab:Z])}N.fireWith(R,[J,U]);if(v){G.trigger("ajaxComplete",[J,D]);if(!(--l.active)){l.event.trigger("ajaxStop")}}}return J},getJSON:function(v,w,x){return l.get(v,w,x,"json")},getScript:function(v,w){return l.get(v,undefined,w,"script")}});l.each(["get","post"],function(v,w){l[w]=function(x,z,A,y){if(l.isFunction(z)){y=y||A;A=z;z=undefined}return l.ajax({url:x,type:w,dataType:y,data:z,success:A})}});return l});